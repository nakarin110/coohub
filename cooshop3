-- Purge AIMBOT Custom UI
-- Created by Lxwnu

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local Camera = workspace.CurrentCamera

-- AIMBOT Configuration
local SETTINGS = {
    Enabled = false,
    TeamCheck = false, -- Set to false to target all players including teammates
    TargetPart = "Head", -- The part to aim at
    FOV = 250, -- FOV circle size
    Sensitivity = 0.5, -- Lower = smoother, Higher = faster
    ShowFOV = true, -- Show FOV circle
    FOVColor = Color3.fromRGB(255, 0, 0), -- Red FOV circle
    ToggleKey = Enum.KeyCode.RightShift, -- Toggle AIMBOT on/off
    -- ESP Settings
    ESPEnabled = false,
    ESPColor = Color3.fromRGB(255, 0, 0),
    ESPBoxes = true,
    ESPNames = true,
    ESPDistance = true,
    ESPHealth = true,
    MaxESPDistance = 1000,
    -- Mobile Settings
    MobileEnabled = false,
    TouchEnabled = false
}

-- Create UI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "PurgeAimbotUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

-- Main frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 250, 0, 300)
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Title bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

-- Title text
local TitleText = Instance.new("TextLabel")
TitleText.Name = "TitleText"
TitleText.Size = UDim2.new(1, -10, 1, 0)
TitleText.Position = UDim2.new(0, 10, 0, 0)
TitleText.BackgroundTransparency = 1
TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleText.TextSize = 18
TitleText.Font = Enum.Font.SourceSansBold
TitleText.Text = "Purge AIMBOT"
TitleText.TextXAlignment = Enum.TextXAlignment.Left
TitleText.Parent = TitleBar

-- Close button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0, 2)
CloseButton.BackgroundTransparency = 1
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 20
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.Parent = TitleBar

-- Content frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -20, 1, -45)
ContentFrame.Position = UDim2.new(0, 10, 0, 40)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- AIMBOT Toggle
local ToggleFrame = Instance.new("Frame")
ToggleFrame.Name = "ToggleFrame"
ToggleFrame.Size = UDim2.new(1, 0, 0, 40)
ToggleFrame.BackgroundTransparency = 1
ToggleFrame.Parent = ContentFrame

local ToggleLabel = Instance.new("TextLabel")
ToggleLabel.Name = "ToggleLabel"
ToggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
ToggleLabel.BackgroundTransparency = 1
ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleLabel.TextSize = 16
ToggleLabel.Font = Enum.Font.SourceSans
ToggleLabel.Text = "เปิด/ปิด AIMBOT"
ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
ToggleLabel.Parent = ToggleFrame

local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0, 60, 0, 26)
ToggleButton.Position = UDim2.new(1, -60, 0.5, -13)
ToggleButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
ToggleButton.BorderSizePixel = 0
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.TextSize = 14
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.Text = "ปิด"
ToggleButton.Parent = ToggleFrame

-- FOV Slider
local FOVFrame = Instance.new("Frame")
FOVFrame.Name = "FOVFrame"
FOVFrame.Size = UDim2.new(1, 0, 0, 40)
FOVFrame.Position = UDim2.new(0, 0, 0, 50)
FOVFrame.BackgroundTransparency = 1
FOVFrame.Parent = ContentFrame

local FOVLabel = Instance.new("TextLabel")
FOVLabel.Name = "FOVLabel"
FOVLabel.Size = UDim2.new(1, 0, 0, 20)
FOVLabel.BackgroundTransparency = 1
FOVLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
FOVLabel.TextSize = 16
FOVLabel.Font = Enum.Font.SourceSans
FOVLabel.Text = "FOV: 250"
FOVLabel.TextXAlignment = Enum.TextXAlignment.Left
FOVLabel.Parent = FOVFrame

local FOVSlider = Instance.new("Frame")
FOVSlider.Name = "FOVSlider"
FOVSlider.Size = UDim2.new(1, 0, 0, 10)
FOVSlider.Position = UDim2.new(0, 0, 0, 25)
FOVSlider.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
FOVSlider.BorderSizePixel = 0
FOVSlider.Parent = FOVFrame

local FOVFill = Instance.new("Frame")
FOVFill.Name = "FOVFill"
FOVFill.Size = UDim2.new(0.5, 0, 1, 0)
FOVFill.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
FOVFill.BorderSizePixel = 0
FOVFill.Parent = FOVSlider

local FOVButton = Instance.new("TextButton")
FOVButton.Name = "FOVButton"
FOVButton.Size = UDim2.new(1, 0, 1, 0)
FOVButton.BackgroundTransparency = 1
FOVButton.Text = ""
FOVButton.Parent = FOVSlider

-- Sensitivity Slider
local SensFrame = Instance.new("Frame")
SensFrame.Name = "SensFrame"
SensFrame.Size = UDim2.new(1, 0, 0, 40)
SensFrame.Position = UDim2.new(0, 0, 0, 100)
SensFrame.BackgroundTransparency = 1
SensFrame.Parent = ContentFrame

local SensLabel = Instance.new("TextLabel")
SensLabel.Name = "SensLabel"
SensLabel.Size = UDim2.new(1, 0, 0, 20)
SensLabel.BackgroundTransparency = 1
SensLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
SensLabel.TextSize = 16
SensLabel.Font = Enum.Font.SourceSans
SensLabel.Text = "ความรวดเร็ว: 0.5"
SensLabel.TextXAlignment = Enum.TextXAlignment.Left
SensLabel.Parent = SensFrame

local SensSlider = Instance.new("Frame")
SensSlider.Name = "SensSlider"
SensSlider.Size = UDim2.new(1, 0, 0, 10)
SensSlider.Position = UDim2.new(0, 0, 0, 25)
SensSlider.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SensSlider.BorderSizePixel = 0
SensSlider.Parent = SensFrame

local SensFill = Instance.new("Frame")
SensFill.Name = "SensFill"
SensFill.Size = UDim2.new(0.5, 0, 1, 0)
SensFill.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
SensFill.BorderSizePixel = 0
SensFill.Parent = SensSlider

local SensButton = Instance.new("TextButton")
SensButton.Name = "SensButton"
SensButton.Size = UDim2.new(1, 0, 1, 0)
SensButton.BackgroundTransparency = 1
SensButton.Text = ""
SensButton.Parent = SensSlider

-- Show FOV Toggle
local ShowFOVFrame = Instance.new("Frame")
ShowFOVFrame.Name = "ShowFOVFrame"
ShowFOVFrame.Size = UDim2.new(1, 0, 0, 40)
ShowFOVFrame.Position = UDim2.new(0, 0, 0, 150)
ShowFOVFrame.BackgroundTransparency = 1
ShowFOVFrame.Parent = ContentFrame

local ShowFOVLabel = Instance.new("TextLabel")
ShowFOVLabel.Name = "ShowFOVLabel"
ShowFOVLabel.Size = UDim2.new(0.7, 0, 1, 0)
ShowFOVLabel.BackgroundTransparency = 1
ShowFOVLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ShowFOVLabel.TextSize = 16
ShowFOVLabel.Font = Enum.Font.SourceSans
ShowFOVLabel.Text = "แสดงวงกลม FOV"
ShowFOVLabel.TextXAlignment = Enum.TextXAlignment.Left
ShowFOVLabel.Parent = ShowFOVFrame

local ShowFOVButton = Instance.new("TextButton")
ShowFOVButton.Name = "ShowFOVButton"
ShowFOVButton.Size = UDim2.new(0, 60, 0, 26)
ShowFOVButton.Position = UDim2.new(1, -60, 0.5, -13)
ShowFOVButton.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
ShowFOVButton.BorderSizePixel = 0
ShowFOVButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ShowFOVButton.TextSize = 14
ShowFOVButton.Font = Enum.Font.SourceSansBold
ShowFOVButton.Text = "เปิด"
ShowFOVButton.Parent = ShowFOVFrame

-- ESP Toggle
local ESPToggleFrame = Instance.new("Frame")
ESPToggleFrame.Name = "ESPToggleFrame"
ESPToggleFrame.Size = UDim2.new(1, 0, 0, 40)
ESPToggleFrame.Position = UDim2.new(0, 0, 0, 260)
ESPToggleFrame.BackgroundTransparency = 1
ESPToggleFrame.Parent = ContentFrame

local ESPToggleLabel = Instance.new("TextLabel")
ESPToggleLabel.Name = "ESPToggleLabel"
ESPToggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
ESPToggleLabel.BackgroundTransparency = 1
ESPToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPToggleLabel.TextSize = 16
ESPToggleLabel.Font = Enum.Font.SourceSans
ESPToggleLabel.Text = "เปิด/ปิด ESP"
ESPToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
ESPToggleLabel.Parent = ESPToggleFrame

local ESPToggleButton = Instance.new("TextButton")
ESPToggleButton.Name = "ESPToggleButton"
ESPToggleButton.Size = UDim2.new(0, 60, 0, 26)
ESPToggleButton.Position = UDim2.new(1, -60, 0.5, -13)
ESPToggleButton.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
ESPToggleButton.BorderSizePixel = 0
ESPToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ESPToggleButton.TextSize = 14
ESPToggleButton.Font = Enum.Font.SourceSansBold
ESPToggleButton.Text = "ปิด"
ESPToggleButton.Parent = ESPToggleFrame

-- Status Label
local StatusFrame = Instance.new("Frame")
StatusFrame.Name = "StatusFrame"
StatusFrame.Size = UDim2.new(1, 0, 0, 30)
StatusFrame.Position = UDim2.new(0, 0, 0, 200)
StatusFrame.BackgroundTransparency = 1
StatusFrame.Parent = ContentFrame

local StatusLabel = Instance.new("TextLabel")
StatusLabel.Name = "StatusLabel"
StatusLabel.Size = UDim2.new(1, 0, 1, 0)
StatusLabel.BackgroundTransparency = 1
StatusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusLabel.TextSize = 14
StatusLabel.Font = Enum.Font.SourceSans
StatusLabel.Text = "สถานะ: รอคำสั่ง"
StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
StatusLabel.Parent = StatusFrame

-- Credit Label
local CreditLabel = Instance.new("TextLabel")
CreditLabel.Name = "CreditLabel"
CreditLabel.Size = UDim2.new(1, 0, 0, 20)
CreditLabel.Position = UDim2.new(0, 0, 0, 230)
CreditLabel.BackgroundTransparency = 1
CreditLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
CreditLabel.TextSize = 12
CreditLabel.Font = Enum.Font.SourceSans
CreditLabel.Text = "สร้างโดย Lxwnu"
CreditLabel.TextXAlignment = Enum.TextXAlignment.Center
CreditLabel.Parent = ContentFrame

-- FOV Circle
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 2
FOVCircle.NumSides = 100
FOVCircle.Radius = SETTINGS.FOV
FOVCircle.Filled = false
FOVCircle.Visible = SETTINGS.ShowFOV
FOVCircle.ZIndex = 999
FOVCircle.Transparency = 1
FOVCircle.Color = SETTINGS.FOVColor
FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)

-- ESP Functions
local function CreateESP(player)
    local ESP = {}
    
    -- Create Box
    ESP.Box = Drawing.new("Square")
    ESP.Box.Visible = false
    ESP.Box.Color = SETTINGS.ESPColor
    ESP.Box.Thickness = 1
    ESP.Box.Transparency = 1
    ESP.Box.Filled = false

    -- Create Name
    ESP.Name = Drawing.new("Text")
    ESP.Name.Visible = false
    ESP.Name.Color = SETTINGS.ESPColor
    ESP.Name.Size = 14
    ESP.Name.Center = true
    ESP.Name.Outline = true

    -- Create Distance
    ESP.Distance = Drawing.new("Text")
    ESP.Distance.Visible = false
    ESP.Distance.Color = SETTINGS.ESPColor
    ESP.Distance.Size = 12
    ESP.Distance.Center = true
    ESP.Distance.Outline = true

    -- Create Health Bar
    ESP.HealthBar = Drawing.new("Square")
    ESP.HealthBar.Visible = false
    ESP.HealthBar.Color = Color3.fromRGB(0, 255, 0)
    ESP.HealthBar.Thickness = 1
    ESP.HealthBar.Filled = true

    return ESP
end

local ESPObjects = {}

-- Update ESP
local function UpdateESP()
    for player, esp in pairs(ESPObjects) do
        if not player or not player.Character or not SETTINGS.ESPEnabled then
            esp.Box.Visible = false
            esp.Name.Visible = false
            esp.Distance.Visible = false
            esp.HealthBar.Visible = false
            continue
        end

        local character = player.Character
        local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
        local humanoid = character:FindFirstChild("Humanoid")
        
        if not humanoidRootPart or not humanoid then continue end

        local vector, onScreen = Camera:WorldToViewportPoint(humanoidRootPart.Position)
        local distance = (humanoidRootPart.Position - Camera.CFrame.Position).Magnitude

        if not onScreen or distance > SETTINGS.MaxESPDistance then
            esp.Box.Visible = false
            esp.Name.Visible = false
            esp.Distance.Visible = false
            esp.HealthBar.Visible = false
            continue
        end

        -- Update ESP elements
        if SETTINGS.ESPBoxes then
            esp.Box.Visible = true
        end

        if SETTINGS.ESPNames then
            esp.Name.Visible = true
            esp.Name.Position = Vector2.new(vector.X, vector.Y - 40)
            esp.Name.Text = player.Name
        end

        if SETTINGS.ESPDistance then
            esp.Distance.Visible = true
            esp.Distance.Position = Vector2.new(vector.X, vector.Y + 20)
            esp.Distance.Text = math.floor(distance) .. " studs"
        end

        if SETTINGS.ESPHealth then
            esp.HealthBar.Visible = true
            local health = humanoid.Health / humanoid.MaxHealth
            esp.HealthBar.Color = Color3.fromRGB(255 - (255 * health), 255 * health, 0)
        end
    end
end

-- Mobile Touch Controls
local TouchButton = Instance.new("ImageButton")
TouchButton.Size = UDim2.new(0, 50, 0, 50)
TouchButton.Position = UDim2.new(1, -60, 0.5, -25)
TouchButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
TouchButton.BackgroundTransparency = 0.5
TouchButton.Visible = false
TouchButton.Parent = ScreenGui

TouchButton.TouchButton1Down:Connect(function()
    SETTINGS.TouchEnabled = true
end)

TouchButton.TouchButton1Up:Connect(function()
    SETTINGS.TouchEnabled = false
end)

-- Functions
local function UpdateFOVCircle()
    FOVCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    FOVCircle.Radius = SETTINGS.FOV
    FOVCircle.Visible = SETTINGS.Enabled and SETTINGS.ShowFOV
end

local function IsValidTarget(player)
    if not player or not player.Character or not player.Character:FindFirstChild("Humanoid") then
        return false
    end
    
    if player.Character.Humanoid.Health <= 0 then
        return false
    end
    
    if not SETTINGS.TeamCheck then
        return true
    end
    
    return player.Team ~= LocalPlayer.Team
end

local function GetClosestPlayerInFOV()
    local closestPlayer = nil
    local shortestDistance = SETTINGS.FOV
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and IsValidTarget(player) then
            local character = player.Character
            if character and character:FindFirstChild(SETTINGS.TargetPart) then
                local targetPart = character[SETTINGS.TargetPart]
                local screenPoint = Camera:WorldToScreenPoint(targetPart.Position)
                local distance = (Vector2.new(screenPoint.X, screenPoint.Y) - Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)).Magnitude
                
                if screenPoint.Z > 0 and distance < shortestDistance then
                    closestPlayer = player
                    shortestDistance = distance
                end
            end
        end
    end
    
    return closestPlayer
end

-- UI Functions
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    FOVCircle:Remove()
    SETTINGS.Enabled = false
end)

ToggleButton.MouseButton1Click:Connect(function()
    SETTINGS.Enabled = not SETTINGS.Enabled
    ToggleButton.BackgroundColor3 = SETTINGS.Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    ToggleButton.Text = SETTINGS.Enabled and "เปิด" or "ปิด"
    FOVCircle.Visible = SETTINGS.Enabled and SETTINGS.ShowFOV
    StatusLabel.Text = "สถานะ: " .. (SETTINGS.Enabled and "กำลังทำงาน" or "รอคำสั่ง")
end)

ShowFOVButton.MouseButton1Click:Connect(function()
    SETTINGS.ShowFOV = not SETTINGS.ShowFOV
    ShowFOVButton.BackgroundColor3 = SETTINGS.ShowFOV and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    ShowFOVButton.Text = SETTINGS.ShowFOV and "เปิด" or "ปิด"
    FOVCircle.Visible = SETTINGS.Enabled and SETTINGS.ShowFOV
end)

ESPToggleButton.MouseButton1Click:Connect(function()
    SETTINGS.ESPEnabled = not SETTINGS.ESPEnabled
    ESPToggleButton.BackgroundColor3 = SETTINGS.ESPEnabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    ESPToggleButton.Text = SETTINGS.ESPEnabled and "เปิด" or "ปิด"
end)

FOVButton.MouseButton1Down:Connect(function()
    local input = UserInputService:GetMouseLocation()
    local sliderPosition = math.clamp((input.X - FOVSlider.AbsolutePosition.X) / FOVSlider.AbsoluteSize.X, 0, 1)
    
    SETTINGS.FOV = math.floor(sliderPosition * 500)
    FOVFill.Size = UDim2.new(sliderPosition, 0, 1, 0)
    FOVLabel.Text = "FOV: " .. SETTINGS.FOV
    FOVCircle.Radius = SETTINGS.FOV
    
    local dragging = true
    
    local inputChanged = RunService.RenderStepped:Connect(function()
        if dragging then
            local mousePos = UserInputService:GetMouseLocation()
            local sliderPos = math.clamp((mousePos.X - FOVSlider.AbsolutePosition.X) / FOVSlider.AbsoluteSize.X, 0, 1)
            SETTINGS.FOV = math.floor(sliderPos * 500)
            FOVFill.Size = UDim2.new(sliderPos, 0, 1, 0)
            FOVLabel.Text = "FOV: " .. SETTINGS.FOV
            FOVCircle.Radius = SETTINGS.FOV
        end
    end)
    
    local inputEnded
    inputEnded = UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
            inputChanged:Disconnect()
            inputEnded:Disconnect()
        end
    end)
end)

SensButton.MouseButton1Down:Connect(function()
    local input = UserInputService:GetMouseLocation()
    local sliderPosition = math.clamp((input.X - SensSlider.AbsolutePosition.X) / SensSlider.AbsoluteSize.X, 0, 1)
    
    SETTINGS.Sensitivity = sliderPosition * 2
    SensFill.Size = UDim2.new(sliderPosition, 0, 1, 0)
    SensLabel.Text = "ความรวดเร็ว: " .. string.format("%.2f", SETTINGS.Sensitivity)
    
    local dragging = true
    
    local inputChanged = RunService.RenderStepped:Connect(function()
        if dragging then
            local mousePos = UserInputService:GetMouseLocation()
            local sliderPos = math.clamp((mousePos.X - SensSlider.AbsolutePosition.X) / SensSlider.AbsoluteSize.X, 0, 1)
            SETTINGS.Sensitivity = sliderPos * 2
            SensFill.Size = UDim2.new(sliderPos, 0, 1, 0)
            SensLabel.Text = "ความรวดเร็ว: " .. string.format("%.2f", SETTINGS.Sensitivity)
        end
    end)
    
    local inputEnded
    inputEnded = UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
            inputChanged:Disconnect()
            inputEnded:Disconnect()
        end
    end)
end)

UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == SETTINGS.ToggleKey then
        SETTINGS.Enabled = not SETTINGS.Enabled
        ToggleButton.BackgroundColor3 = SETTINGS.Enabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
        ToggleButton.Text = SETTINGS.Enabled and "เปิด" or "ปิด"
        FOVCircle.Visible = SETTINGS.Enabled and SETTINGS.ShowFOV
        StatusLabel.Text = "สถานะ: " .. (SETTINGS.Enabled and "กำลังทำงาน" or "รอคำสั่ง")
    end
end)

RunService.RenderStepped:Connect(function()
    UpdateFOVCircle()
    UpdateESP()
    
    if SETTINGS.Enabled and (SETTINGS.TouchEnabled or not SETTINGS.MobileEnabled) then
        local target = GetClosestPlayerInFOV()
        if target and target.Character and target.Character:FindFirstChild(SETTINGS.TargetPart) then
            local targetPart = target.Character[SETTINGS.TargetPart]
            local targetPosition = Camera:WorldToScreenPoint(targetPart.Position)
            
            if targetPosition.Z > 0 then
                local mousePosition = UserInputService:GetMouseLocation()
                local moveX = (targetPosition.X - mousePosition.X) * SETTINGS.Sensitivity
                local moveY = (targetPosition.Y - mousePosition.Y) * SETTINGS.Sensitivity
                
                mousemoverel(moveX, moveY)
            end
        end
    end
end)

Players.PlayerAdded:Connect(function(player)
    ESPObjects[player] = CreateESP(player)
end)

Players.PlayerRemoving:Connect(function(player)
    if ESPObjects[player] then
        for _, drawing in pairs(ESPObjects[player]) do
            drawing:Remove()
        end
        ESPObjects[player] = nil
    end
end)

FOVCircle.Radius = SETTINGS.FOV
FOVFill.Size = UDim2.new(SETTINGS.FOV / 500, 0, 1, 0)
SensFill.Size = UDim2.new(SETTINGS.Sensitivity / 2, 0, 1, 0)

TouchButton.Visible = UserInputService.TouchEnabled
SETTINGS.MobileEnabled = UserInputService.TouchEnabled

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Purge AIMBOT",
    Text = "กำลังทำงาน - กด RightShift หรือปุ่มบนหน้าจอเพื่อเปิด/ปิด",
    Duration = 5
})

return "Purge AIMBOT พร้อมใช้งานแล้ว! กด RightShift หรือปุ่มบนหน้าจอเพื่อเปิด/ปิด"
